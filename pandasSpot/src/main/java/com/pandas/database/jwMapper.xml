<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jwMapper">
	<select id="pageStudy" parameterType="int"
		resultType="com.pandas.model.Studies">
		SELECT * FROM (
		SELECT A.*, ROWNUM AS RNUM FROM ( 
		SELECT * FROM studies ORDER BY STUDY_IDX ASC ) A)
		WHERE RNUM between ((#{pages} -1)*15+1) and #{pages}*15
	</select>
	<select id="getStudyLength" resultType="int">
		select count(*) from STUDIES
	</select>
	
    <update id="upCommLikes" parameterType="int">
        UPDATE communities
        SET comm_likes = comm_likes + 1
        WHERE comm_idx = #{comm_idx}
    </update>
    
    <select id="getCommLikes" resultType="int" parameterType="int">
    	select COMM_LIKES from communities WHERE comm_idx = #{comm_idx}
    </select>
</mapper>